<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Motorcu Kedi - Mor Macera</title>
    <style>
        body { margin: 0; overflow: hidden; background: #1a5e20; font-family: sans-serif; }
        canvas { display: block; }
        
        /* HAVA DURUMU BUTONU */
        #weatherBtn { 
            position: fixed; top: 20px; left: 20px; width: 60px; height: 60px; 
            background: #fff; border-radius: 15px; display: flex; align-items: center; 
            justify-content: center; font-size: 30px; cursor: pointer; z-index: 500; 
            border: 4px solid #9c27b0; box-shadow: 0 4px 10px rgba(0,0,0,0.5);
        }

        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 1000; color: white; }
        .menu-card { background: #222; padding: 30px; border-radius: 20px; border: 3px solid #9c27b0; text-align: center; width: 260px; }
        .menu-btn { width: 100%; padding: 12px; margin: 10px 0; font-size: 18px; background: #9c27b0; color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; }
        
        .control-btn { width: 85px; height: 85px; background: rgba(156, 39, 176, 0.5); border: 3px solid #e1bee7; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 40px; color: white; pointer-events: auto; }
        
        #boostContainer { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); width: 200px; height: 20px; background: #333; border: 2px solid #fff; display: none; border-radius: 10px; overflow: hidden; z-index: 400; }
        #boostBar { width: 100%; height: 100%; background: #9c27b0; }
        #scoreUI { position: fixed; top: 90px; left: 20px; color: white; font-weight: bold; font-size: 22px; z-index: 400; text-shadow: 2px 2px 4px #000; }
    </style>
</head>
<body>

    <div id="weatherBtn" onclick="toggleWeather()">‚òÄÔ∏è</div>
    <div id="scoreUI">Skor: 0</div>
    <div id="boostContainer"><div id="boostBar"></div></div>
    <canvas id="gameCanvas"></canvas>

    <div id="gameMenu" class="overlay">
        <div class="menu-card">
            <h1 style="color:#ce93d8">MOR ORMAN</h1>
            <p id="scoreText"></p>
            <button class="menu-btn" onclick="resetGame()">BA≈ûLA</button>
        </div>
    </div>

    <div style="position:fixed; bottom:40px; width:100%; display:flex; justify-content:space-around; pointer-events:none; z-index:600;">
        <div id="leftBtn" class="control-btn" onmousedown="moveLeft=true" onmouseup="moveLeft=false" ontouchstart="moveLeft=true" ontouchend="moveLeft=false">‚óÄ</div>
        <div id="rightBtn" class="control-btn" onmousedown="moveRight=true" onmouseup="moveRight=false" ontouchstart="moveRight=true" ontouchend="moveRight=false">‚ñ∂</div>
    </div>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        
        const treeImg = new Image(); treeImg.src = "https://resmim.net/cdn/2026/01/31/wVgFX3.png"; 
        const boostImg = new Image(); boostImg.src = "https://resmim.net/cdn/2026/01/31/wVgHRQ.jpg";

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let catX, gameSpeed, score, isPaused = true, boostActive = false, boostTimer = 0;
        let trees = [], lines = [], obstacles = [], drops = [], boostItem = {x:0, y:-2000, active:true};
        let isRainy = false, moveLeft = false, moveRight = false;
        const roadWidth = Math.min(canvas.width * 0.65, 420);
        const roadX = (canvas.width - roadWidth) / 2;

        function toggleWeather() {
            isRainy = !isRainy;
            document.getElementById("weatherBtn").innerText = isRainy ? "üåßÔ∏è" : "‚òÄÔ∏è";
        }

        function resetGame() {
            catX = canvas.width / 2; gameSpeed = 6; score = 0; boostActive = false;
            trees = []; lines = [0, 200, 400, 600];
            obstacles = [{x: roadX + 50, y: -600}, {x: roadX + roadWidth - 100, y: -1200}];
            for(let i=0; i<8; i++) {
                trees.push({ x: Math.random()*(roadX-90), y: i*200, side: 'L' });
                trees.push({ x: roadX + roadWidth + Math.random()*20, y: i*200, side: 'R' });
            }
            drops = Array.from({length: 50}, () => ({x: Math.random()*canvas.width, y: Math.random()*canvas.height, s: Math.random()*10+10}));
            isPaused = false;
            document.getElementById("gameMenu").style.display = "none";
            draw();
        }

        function draw() {
            if (isPaused) return;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = isRainy ? "#0d1b2a" : "#1a5e20"; 
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            let currentSpeed = boostActive ? gameSpeed * 2.5 : gameSpeed;

            if(boostActive) {
                boostTimer--;
                document.getElementById("boostBar").style.width = (boostTimer/360)*100 + "%";
                if(boostTimer <= 0) {
                    boostActive = false;
                    document.getElementById("boostContainer").style.display = "none";
                }
            }

            // Yol ve ≈ûeritler
            ctx.fillStyle = "#333"; ctx.fillRect(roadX, 0, roadWidth, canvas.height);
            ctx.fillStyle = "#fff";
            lines.forEach((ly, i) => {
                ctx.fillRect(canvas.width/2 - 5, ly, 10, 60);
                lines[i] += currentSpeed;
                if(lines[i] > canvas.height) lines[i] = -60;
            });

            // Mor Aƒüa√ßlar
            ctx.filter = "hue-rotate(260deg) saturate(140%)";
            trees.forEach(t => {
                ctx.drawImage(treeImg, t.x, t.y, 90, 120);
                t.y += currentSpeed;
                if(t.y > canvas.height) t.y = -130;
            });
            ctx.filter = "none";

            // Engeller (Kutular)
            ctx.font = "40px Arial";
            obstacles.forEach(ob => {
                ctx.fillText("üì¶", ob.x, ob.y);
                ob.y += currentSpeed;
                if(Math.abs(ob.y - (canvas.height-120)) < 40 && Math.abs(ob.x - (catX-25)) < 40) {
                    if(!boostActive) { isPaused = true; document.getElementById("gameMenu").style.display = "flex"; document.getElementById("scoreText").innerText = "Skor: " + Math.floor(score); }
                    else ob.y = -500;
                }
                if(ob.y > canvas.height) { ob.y = -400; ob.x = roadX + Math.random()*(roadWidth-60); }
            });

            // Boost Item (Nitro)
            if(boostItem.active) {
                ctx.filter = "hue-rotate(260deg)"; // Nitroyu da mor yapar
                ctx.drawImage(boostImg, boostItem.x, boostItem.y, 50, 50);
                ctx.filter = "none";
                boostItem.y += currentSpeed;
                if(Math.abs(boostItem.y - (canvas.height-120)) < 50 && Math.abs(boostItem.x - (catX-25)) < 50) {
                    boostActive = true; boostTimer = 360; boostItem.active = false;
                    document.getElementById("boostContainer").style.display = "block";
                }
                if(boostItem.y > canvas.height) { boostItem.y = -2000; boostItem.x = roadX + Math.random()*(roadWidth-50); boostItem.active = true; }
            }

            // Yaƒümur
            if(isRainy) {
                ctx.strokeStyle = "rgba(200, 200, 255, 0.5)";
                drops.forEach(d => {
                    ctx.beginPath(); ctx.moveTo(d.x, d.y); ctx.lineTo(d.x, d.y+15); ctx.stroke();
                    d.y += d.s + currentSpeed;
                    if(d.y > canvas.height) d.y = -20;
                });
            }

            // Kedi
            ctx.font = "55px Arial";
            ctx.fillText("üêàüèçÔ∏è", catX - 30, canvas.height - 100);
            if (moveLeft && catX > roadX + 40) catX -= 8;
            if (moveRight && catX < roadX + roadWidth - 40) catX += 8;

            score += boostActive ? 0.3 : 0.1;
            gameSpeed += 0.001;
            document.getElementById("scoreUI").innerText = "Skor: " + Math.floor(score);
            requestAnimationFrame(draw);
        }

        window.onkeydown = (e) => { if(e.key=="ArrowLeft") moveLeft=true; if(e.key=="ArrowRight") moveRight=true; };
        window.onkeyup = (e) => { moveLeft=false; moveRight=false; };
    </script>
</body>
</html>
